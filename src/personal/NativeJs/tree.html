<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>pan-book-admin</title>
    </head>
    <body>
    </body>
</html>

<script>
    let list =[
        {
            id:1, name:'部门A', pid:0
        },
        {
            id:2, name:'部门B', pid:0
        },
        {
            id:3, name:'部门C', pid:1
        },
        {
            id:4, name:'部门D', pid:1
        },
        {
            id:5, name:'部门E', pid:2
        },
        {
            id:6, name:'部门F', pid:3
        },
        {
            id:7, name:'部门G', pid:2
        },
        {
            id:8, name:'部门H', pid:4
        }
    ];

    let tree = [
        {
            id: 1,
            name: '部门A',
            pid: 0,
            children: [
                {
                    id: 3,
                    name: '部门C',
                    pid: 1,
                    children: [
                        {
                            id: 6,
                            name: '部门F',
                            pid: 3
                        }, 
                        {
                            id: 16,
                            name: '部门L',
                            pid: 3
                        }
                    ]
                },
                {
                    id: 4,
                    name: '部门D',
                    pid: 1,
                    children: [
                        {
                            id: 8,
                            name: '部门H',
                            pid: 4
                        }
                    ]
                }
            ]
        },
        {
            id: 2,
            name: '部门L',
            pid: 3
        }
    ];
    
    function convert(list) {
        const res = []
        const map = list.reduce((res, v) => (res[v.id] = v, res), {})
        console.log(map, '124124')
        for (const item of list) {
            if (item.pid === 0) {
                res.push(item)
                continue
            }
            if (item.pid in map) {
                const parent = map[item.pid]
                parent.children = parent.children || []
                parent.children.push(item)
            }
        }
        console.log(res)
        return res
    }

    convert(list)
      
</script>